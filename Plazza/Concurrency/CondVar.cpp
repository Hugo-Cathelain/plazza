///////////////////////////////////////////////////////////////////////////////
// Dependencies
///////////////////////////////////////////////////////////////////////////////
#include "Concurrency/CondVar.hpp"

///////////////////////////////////////////////////////////////////////////////
// Namespace Plazza
///////////////////////////////////////////////////////////////////////////////
namespace Plazza
{

///////////////////////////////////////////////////////////////////////////////
CondVar::CondVar(void)
    : m_cv()
{}

///////////////////////////////////////////////////////////////////////////////
void CondVar::Wait(IMutex& mutex)
{
    std::unique_lock<std::mutex> lock(mutex);
    m_cv.wait(lock);
}

///////////////////////////////////////////////////////////////////////////////
void CondVar::DoWaitFor(
    IMutex& mutex,
    const std::chrono::milliseconds& relTime
)
{
    std::unique_lock<std::mutex> lock(mutex);
    m_cv.wait_for(lock, relTime);
}

///////////////////////////////////////////////////////////////////////////////
void CondVar::NotifyOne(void)
{
    m_cv.notify_one();
}

///////////////////////////////////////////////////////////////////////////////
void CondVar::NotifyAll(void)
{
    m_cv.notify_all();
}

} // !namespace Plazza
