///////////////////////////////////////////////////////////////////////////////
// Header guard
///////////////////////////////////////////////////////////////////////////////
#pragma once

///////////////////////////////////////////////////////////////////////////////
// Dependencies
///////////////////////////////////////////////////////////////////////////////
#include "Pizza/IPizza.hpp"
#include <regex>
#include <vector>
#include <string>
#include <tuple>

///////////////////////////////////////////////////////////////////////////////
// Namespace Plazza
///////////////////////////////////////////////////////////////////////////////
namespace Plazza
{

///////////////////////////////////////////////////////////////////////////////
/// \brief
///
///////////////////////////////////////////////////////////////////////////////
class Parser
{
private:
    ///////////////////////////////////////////////////////////////////////////
    //
    ///////////////////////////////////////////////////////////////////////////
    static const std::regex PIZZA_ORDER_EXP;

public:
    ///////////////////////////////////////////////////////////////////////////
    //
    ///////////////////////////////////////////////////////////////////////////
    using Orders = std::vector<std::tuple<
        std::shared_ptr<IPizza>, unsigned int
    >>;

public:
    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    ///////////////////////////////////////////////////////////////////////////
    Parser(void) = delete;

public:
    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    /// \param line
    ///
    /// \return
    ///
    ///////////////////////////////////////////////////////////////////////////
    static Orders ParseOrders(const std::string& line);

    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    /// \param str
    ///
    /// \return
    ///
    ///////////////////////////////////////////////////////////////////////////
    static std::string Trim(const std::string& str);

private:
    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    /// \param str
    ///
    /// \return
    ///
    ///////////////////////////////////////////////////////////////////////////
    static IPizza::Size StringToPizzaSize(const std::string& str);
};

} // !namespace Plazza
