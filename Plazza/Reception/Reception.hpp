///////////////////////////////////////////////////////////////////////////////
// Header guard
///////////////////////////////////////////////////////////////////////////////
#pragma once

///////////////////////////////////////////////////////////////////////////////
// Dependencies
///////////////////////////////////////////////////////////////////////////////
#include "Kitchen/Kitchen.hpp"
#include "Utils/Timer.hpp"
#include "Pizza/IPizza.hpp"
#include "Reception/Parser.hpp"
#include <optional>
#include <memory>

///////////////////////////////////////////////////////////////////////////////
// Namespace Plazza
///////////////////////////////////////////////////////////////////////////////
namespace Plazza
{

///////////////////////////////////////////////////////////////////////////////
/// \brief
///
///////////////////////////////////////////////////////////////////////////////
class Reception
{
private:
    ///////////////////////////////////////////////////////////////////////////
    //
    ///////////////////////////////////////////////////////////////////////////
    std::vector<std::unique_ptr<Kitchen>> m_kitchens;   //<!
    std::chrono::milliseconds m_restockTime;            //<!
    size_t m_cookCount;                                 //<!

public:
    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    /// \param restockTime
    /// \param cookCount
    ///
    ///////////////////////////////////////////////////////////////////////////
    Reception(std::chrono::milliseconds restockTime, size_t cookCount);

    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    ///////////////////////////////////////////////////////////////////////////
    ~Reception();

private:
    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    /// \param id
    ///
    /// \return
    ///
    ///////////////////////////////////////////////////////////////////////////
    std::optional<std::unique_ptr<Kitchen>&> GetKitchenByID(size_t id);

    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    ///////////////////////////////////////////////////////////////////////////
    void CreateKitchen(void);

    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    /// \param id
    ///
    ///////////////////////////////////////////////////////////////////////////
    void RemoveKitchen(size_t id);

public:
    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    ///////////////////////////////////////////////////////////////////////////
    void DisplayStatus(void);

    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    /// \param orders
    ///
    ///////////////////////////////////////////////////////////////////////////
    void ProcessOrders(const Parser::Orders& orders);
};

} // !namespace Plazza
