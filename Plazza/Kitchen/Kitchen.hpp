///////////////////////////////////////////////////////////////////////////////
// Header guard
///////////////////////////////////////////////////////////////////////////////
#pragma once

///////////////////////////////////////////////////////////////////////////////
// Dependencies
///////////////////////////////////////////////////////////////////////////////
#include "Concurrency/Process.hpp"
#include "Kitchen/Cook.hpp"
#include "Kitchen/Stock.hpp"
#include "Kitchen/ThreadPool.hpp"
#include <vector>
#include <memory>

#ifdef PLAZZA_BONUS
    #include <SFML/Graphics.hpp>
    #include <SFML/Window.hpp>
    #include <SFML/System.hpp>
#endif

///////////////////////////////////////////////////////////////////////////////
// Namespace Plazza
///////////////////////////////////////////////////////////////////////////////
namespace Plazza
{

///////////////////////////////////////////////////////////////////////////////
/// \brief
///
///////////////////////////////////////////////////////////////////////////////
class Kitchen : public Process
{
private:
    ///////////////////////////////////////////////////////////////////////////
    ///
    ///////////////////////////////////////////////////////////////////////////
    float m_multiplier;                     //<!
    Stock m_stock;                          //<!
    ThreadPool m_pool;                      //<!
    std::vector<Cook> m_cooks;              //<!

#ifdef PLAZZA_BONUS
    // BONUS
    std::unique_ptr<sf::RenderWindow> m_window;
#endif

public:
    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    /// \param numberOfCooks
    /// \param multiplier
    /// \param restockTime
    ///
    ///////////////////////////////////////////////////////////////////////////
    Kitchen(
        size_t numberOfCooks = 1,
        float multiplier = 1.0f,
        std::chrono::milliseconds restockTime = std::chrono::milliseconds(1000)
    );

    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    ///////////////////////////////////////////////////////////////////////////
    ~Kitchen();

private:
    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    ///////////////////////////////////////////////////////////////////////////
    void Routine(void);
};

} // !namespace Plazza
